# DD 3D å½©ç¥¨ç³»ç»Ÿéƒ¨ç½²æŒ‡å—

## ğŸš€ éƒ¨ç½²æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨éƒ¨ç½² DD 3D å½©ç¥¨ç³»ç»Ÿçš„å‰ç«¯å’Œåç«¯ç»„ä»¶ã€‚

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### ç¯å¢ƒè¦æ±‚

- Node.js 18+ (å‰ç«¯)
- Rust 1.70+ (åç«¯)
- Docker (å¯é€‰)
- Git

### ç½‘ç»œè¦æ±‚

- åŒºå—é“¾ç½‘ç»œè®¿é—®
- RPC èŠ‚ç‚¹è¿æ¥
- éƒ¨ç½²æƒé™

## ğŸ—ï¸ åç«¯éƒ¨ç½² (æ™ºèƒ½åˆçº¦)

### 1. å‡†å¤‡ç¯å¢ƒ

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£… Rust (å¦‚æœæœªå®‰è£…)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# å®‰è£… CosmWasm å·¥å…·
cargo install cosmwasm-opt
```

### 2. æ„å»ºåˆçº¦

```bash
# æ„å»ºåˆçº¦
cargo build --release --target wasm32-unknown-unknown

# ä¼˜åŒ– WASM æ–‡ä»¶
cosmwasm-opt target/wasm32-unknown-unknown/release/dd_3d_lottery.wasm \
  -o target/wasm32-unknown-unknown/release/dd_3d_lottery_optimized.wasm
```

### 3. éƒ¨ç½²åˆçº¦

#### æ–¹æ³• 1ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬

```bash
# é…ç½®ç¯å¢ƒå˜é‡
export CHAIN_ID="cosmoshub-4"
export RPC_URL="https://rpc.cosmos.network"
export ADMIN_ADDRESS="cosmwasm1admin..."

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./scripts/deploy.sh
```

#### æ–¹æ³• 2ï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. ä¸Šä¼ åˆçº¦ä»£ç 
wasmd tx wasm store target/wasm32-unknown-unknown/release/dd_3d_lottery_optimized.wasm \
  --from <your-key> \
  --gas auto \
  --gas-adjustment 1.3 \
  --chain-id <chain-id> \
  --node <rpc-url> \
  --yes

# 2. å®ä¾‹åŒ–åˆçº¦
wasmd tx wasm instantiate <code-id> '{
  "admin": "<admin-address>",
  "service_fee_rate": "0.1",
  "min_bet_amount": "1000",
  "max_bet_amount": "1000000",
  "bet_denom": "uusd",
  "pause_requested": false
}' \
  --from <your-key> \
  --admin <admin-address> \
  --label "DD 3D Lottery" \
  --chain-id <chain-id> \
  --node <rpc-url> \
  --yes
```

### 4. éªŒè¯éƒ¨ç½²

```bash
# æŸ¥è¯¢åˆçº¦ä¿¡æ¯
wasmd query wasm contract <contract-address>

# æŸ¥è¯¢åˆçº¦é…ç½®
wasmd query wasm contract-state smart <contract-address> '{"get_config":{}}'
```

## ğŸŒ å‰ç«¯éƒ¨ç½²

### 1. å‡†å¤‡ç¯å¢ƒ

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd front

# å®‰è£…ä¾èµ–
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
nano .env
```

é…ç½®å†…å®¹ï¼š
```env
VITE_CHAIN_ID=cosmoshub-4
VITE_RPC_URL=https://rpc.cosmos.network
VITE_CONTRACT_ADDRESS=cosmwasm1contract...
VITE_SENDER_ADDRESS=cosmwasm1sender...
```

### 3. æ„å»ºåº”ç”¨

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

### 4. éƒ¨ç½²é€‰é¡¹

#### é€‰é¡¹ 1ï¼šVercel éƒ¨ç½²

```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# ç™»å½• Vercel
vercel login

# éƒ¨ç½²åˆ° Vercel
vercel --prod
```

#### é€‰é¡¹ 2ï¼šDocker éƒ¨ç½²

```bash
# æ„å»º Docker é•œåƒ
docker build -t dd-3d-lottery-frontend .

# è¿è¡Œå®¹å™¨
docker run -p 3000:80 dd-3d-lottery-frontend
```

#### é€‰é¡¹ 3ï¼šé™æ€æ–‡ä»¶éƒ¨ç½²

```bash
# æ„å»ºå®Œæˆåï¼Œå°† dist ç›®å½•éƒ¨ç½²åˆ°ä»»ä½•é™æ€æ–‡ä»¶æœåŠ¡å™¨
# ä¾‹å¦‚ï¼šNginx, Apache, CDN ç­‰
```

## ğŸ³ Docker éƒ¨ç½²

### 1. åç«¯ Docker éƒ¨ç½²

```dockerfile
# backend/Dockerfile
FROM cosmwasm/workspace:0.16.0

WORKDIR /code
COPY . .

RUN cargo build --release --target wasm32-unknown-unknown

CMD ["cosmwasm-opt", "target/wasm32-unknown-unknown/release/dd_3d_lottery.wasm", "-o", "dd_3d_lottery_optimized.wasm"]
```

### 2. å‰ç«¯ Docker éƒ¨ç½²

```dockerfile
# front/Dockerfile
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=0 /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### 3. Docker Compose éƒ¨ç½²

```yaml
# docker-compose.yml
version: '3.8'

services:
  frontend:
    build: ./front
    ports:
      - "3000:80"
    environment:
      - VITE_CHAIN_ID=cosmoshub-4
      - VITE_RPC_URL=https://rpc.cosmos.network
      - VITE_CONTRACT_ADDRESS=cosmwasm1contract...
      - VITE_SENDER_ADDRESS=cosmwasm1sender...

  backend:
    build: ./backend
    environment:
      - CHAIN_ID=cosmoshub-4
      - RPC_URL=https://rpc.cosmos.network
```

## â˜ï¸ äº‘å¹³å°éƒ¨ç½²

### 1. AWS éƒ¨ç½²

```bash
# ä½¿ç”¨ AWS CLI éƒ¨ç½²
aws s3 sync dist/ s3://your-bucket-name
aws cloudfront create-invalidation --distribution-id YOUR_DISTRIBUTION_ID --paths "/*"
```

### 2. Google Cloud éƒ¨ç½²

```bash
# ä½¿ç”¨ gcloud CLI éƒ¨ç½²
gcloud app deploy
```

### 3. Azure éƒ¨ç½²

```bash
# ä½¿ç”¨ Azure CLI éƒ¨ç½²
az webapp deployment source config-zip --resource-group myResourceGroup --name myAppName --src dist.zip
```

## ğŸ”§ ç¯å¢ƒé…ç½®

### 1. å¼€å‘ç¯å¢ƒ

```bash
# åç«¯å¼€å‘ç¯å¢ƒ
cd backend
cargo run

# å‰ç«¯å¼€å‘ç¯å¢ƒ
cd front
npm run dev
```

### 2. æµ‹è¯•ç¯å¢ƒ

```bash
# è¿è¡Œæµ‹è¯•
cd backend && cargo test
cd front && npm run test
```

### 3. ç”Ÿäº§ç¯å¢ƒ

```bash
# ç”Ÿäº§ç¯å¢ƒé…ç½®
export NODE_ENV=production
export RUST_LOG=info
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### 1. åº”ç”¨ç›‘æ§

```bash
# å®‰è£…ç›‘æ§å·¥å…·
npm install -g pm2

# å¯åŠ¨åº”ç”¨ç›‘æ§
pm2 start ecosystem.config.js
pm2 monit
```

### 2. æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹æ—¥å¿—
pm2 logs

# æ—¥å¿—è½®è½¬
pm2 install pm2-logrotate
```

### 3. æ€§èƒ½ç›‘æ§

```bash
# å®‰è£…æ€§èƒ½ç›‘æ§
npm install -g clinic

# æ€§èƒ½åˆ†æ
clinic doctor -- node app.js
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. HTTPS é…ç½®

```nginx
# nginx.conf
server {
    listen 443 ssl;
    server_name your-domain.com;
    
    ssl_certificate /path/to/certificate.crt;
    ssl_certificate_key /path/to/private.key;
    
    location / {
        root /usr/share/nginx/html;
        index index.html;
    }
}
```

### 2. å®‰å…¨å¤´éƒ¨

```nginx
# å®‰å…¨å¤´éƒ¨é…ç½®
add_header X-Frame-Options DENY;
add_header X-Content-Type-Options nosniff;
add_header X-XSS-Protection "1; mode=block";
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains";
```

### 3. è®¿é—®æ§åˆ¶

```bash
# é˜²ç«å¢™é…ç½®
ufw allow 22
ufw allow 80
ufw allow 443
ufw enable
```

## ğŸš¨ æ•…éšœæ’é™¤

### 1. å¸¸è§é—®é¢˜

**é—®é¢˜ï¼šåˆçº¦éƒ¨ç½²å¤±è´¥**
```bash
# æ£€æŸ¥ Gas è®¾ç½®
wasmd tx wasm store contract.wasm --gas auto --gas-adjustment 1.5
```

**é—®é¢˜ï¼šå‰ç«¯æ„å»ºå¤±è´¥**
```bash
# æ¸…ç†ç¼“å­˜
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

**é—®é¢˜ï¼šDocker æ„å»ºå¤±è´¥**
```bash
# æ¸…ç† Docker ç¼“å­˜
docker system prune -a
docker build --no-cache .
```

### 2. æ—¥å¿—åˆ†æ

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
journalctl -u your-service

# æŸ¥çœ‹ Docker æ—¥å¿—
docker logs container-name
```

### 3. æ€§èƒ½è°ƒä¼˜

```bash
# å‰ç«¯æ€§èƒ½åˆ†æ
npm run build -- --analyze

# åç«¯æ€§èƒ½åˆ†æ
cargo build --release --target wasm32-unknown-unknown --verbose
```

## ğŸ“ˆ æ‰©å±•éƒ¨ç½²

### 1. è´Ÿè½½å‡è¡¡

```nginx
# nginx è´Ÿè½½å‡è¡¡é…ç½®
upstream backend {
    server backend1:3000;
    server backend2:3000;
    server backend3:3000;
}

server {
    location /api {
        proxy_pass http://backend;
    }
}
```

### 2. æ•°æ®åº“éƒ¨ç½²

```bash
# PostgreSQL éƒ¨ç½²
docker run -d \
  --name postgres \
  -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=lottery \
  -p 5432:5432 \
  postgres:13
```

### 3. ç¼“å­˜éƒ¨ç½²

```bash
# Redis éƒ¨ç½²
docker run -d \
  --name redis \
  -p 6379:6379 \
  redis:6-alpine
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„è®¾è®¡](ç³»ç»Ÿæ¶æ„è®¾è®¡.md)
- [é¡¹ç›®ç»“æ„è¯´æ˜](é¡¹ç›®ç»“æ„è¯´æ˜.md)

## ğŸ¤ æ”¯æŒ

å¦‚æœæ‚¨åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤) éƒ¨åˆ†
2. æœç´¢ [Issues](https://github.com/your-org/dd-3d-lottery/issues)
3. åˆ›å»ºæ–°çš„ Issue

---

**DD 3D å½©ç¥¨ç³»ç»Ÿéƒ¨ç½²æŒ‡å—** - å®Œæ•´çš„éƒ¨ç½²è§£å†³æ–¹æ¡ˆ ğŸš€
