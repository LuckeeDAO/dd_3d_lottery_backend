# DD 3D å½©ç¥¨æ™ºèƒ½åˆçº¦ æ¶æ„ä¸è®¾è®¡çº¦æŸ

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®åç§°**: DD 3D Lottery (3Då½©ç¥¨æ™ºèƒ½åˆçº¦)
- **ç‰ˆæœ¬**: v0.1.0
- **æ–‡æ¡£ç±»å‹**: æ¶æ„ä¸è®¾è®¡çº¦æŸ
- **åˆ›å»ºæ—¥æœŸ**: 2024-01-XX
- **æœ€åæ›´æ–°**: 2024-01-XX

## ğŸ¯ æ¦‚è¿°

æœ¬æ–‡æ¡£æ˜ç¡®æŒ‡å®šDD 3D Lotteryåˆçº¦å¿…é¡»ä½¿ç”¨çš„æŠ€æœ¯æ ˆã€æ¡†æ¶ã€è®¾è®¡æ¨¡å¼ã€ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œä»¥åŠæ˜ç¡®çš„ç¦æ­¢é¡¹ã€‚çº¦æŸAIçš„è®¾è®¡ç©ºé—´ï¼Œç¡®ä¿æŠ€æœ¯æ–¹æ¡ˆç¬¦åˆå›¢é˜Ÿæˆ˜ç•¥ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§è¦æ±‚ã€‚

## ğŸ› ï¸ å¿…éœ€æŠ€æœ¯æ ˆ

### 1. æ ¸å¿ƒæ¡†æ¶

```yaml
required_frameworks:
  cosmwasm:
    version: ">= 2.2.2"
    description: "CosmWasmæ™ºèƒ½åˆçº¦æ¡†æ¶"
    usage: "åˆçº¦å¼€å‘åŸºç¡€æ¡†æ¶"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–æ™ºèƒ½åˆçº¦æ¡†æ¶"
    
  rust:
    version: ">= 1.70.0"
    description: "Rustç¼–ç¨‹è¯­è¨€"
    usage: "åˆçº¦å¼€å‘è¯­è¨€"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–è¯­è¨€"
    
  cosmwasm-std:
    version: ">= 2.2.2"
    description: "CosmWasmæ ‡å‡†åº“"
    usage: "æä¾›åŸºç¡€ç±»å‹å’Œå‡½æ•°"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–æ ‡å‡†åº“"
```

### 2. å­˜å‚¨æ¡†æ¶

```yaml
storage_frameworks:
  cw-storage-plus:
    version: ">= 2.0.0"
    description: "CosmWasmå­˜å‚¨å¢å¼ºåº“"
    usage: "æä¾›Mapã€Itemç­‰é«˜çº§å­˜å‚¨ç»“æ„"
    alternatives: "ä¸å…è®¸ä½¿ç”¨åŸç”Ÿå­˜å‚¨"
    
  cosmwasm-storage:
    version: ">= 2.2.2"
    description: "CosmWasmå­˜å‚¨åº“"
    usage: "åŸºç¡€å­˜å‚¨åŠŸèƒ½"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–å­˜å‚¨åº“"
```

### 3. åºåˆ—åŒ–æ¡†æ¶

```yaml
serialization_frameworks:
  serde:
    version: ">= 1.0.0"
    description: "åºåˆ—åŒ–/ååºåˆ—åŒ–æ¡†æ¶"
    usage: "æ¶ˆæ¯å’ŒçŠ¶æ€åºåˆ—åŒ–"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–åºåˆ—åŒ–åº“"
    
  cosmwasm-schema:
    version: ">= 2.2.2"
    description: "CosmWasmæ¨¡å¼ç”Ÿæˆ"
    usage: "ç”ŸæˆJSON Schema"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–æ¨¡å¼ç”Ÿæˆå·¥å…·"
```

### 4. åŠ å¯†æ¡†æ¶

```yaml
crypto_frameworks:
  sha2:
    version: ">= 0.10.0"
    description: "SHA256å“ˆå¸Œç®—æ³•"
    usage: "æ‰¿è¯ºå“ˆå¸Œè®¡ç®—"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–å“ˆå¸Œç®—æ³•"
    
  cosmwasm-crypto:
    version: ">= 2.2.2"
    description: "CosmWasmåŠ å¯†åº“"
    usage: "åœ°å€éªŒè¯å’Œç­¾åéªŒè¯"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–åŠ å¯†åº“"
```

### 5. å»ä¸­å¿ƒåŒ–ç®—æ³•æ¡†æ¶

```yaml
decentralized_algorithms:
  dd_algorithms_lib:
    version: ">= 0.1.0"
    description: "å»ä¸­å¿ƒåŒ–å†³ç­–ç®—æ³•åº“"
    usage: "éšæœºæ•°ç”Ÿæˆå’Œä¸­å¥–å·ç è®¡ç®—"
    alternatives: "ä¸å…è®¸ä½¿ç”¨å…¶ä»–éšæœºæ•°ç”Ÿæˆåº“"
    features: ["cosmwasm"]
```

## ğŸ—ï¸ è®¾è®¡æ¨¡å¼çº¦æŸ

### 1. å¿…éœ€è®¾è®¡æ¨¡å¼

```yaml
required_patterns:
  state_pattern:
    description: "çŠ¶æ€ç®¡ç†æ¨¡å¼"
    implementation: "ä½¿ç”¨cw-storage-plusçš„Mapå’ŒItem"
    example: |
      use cw_storage_plus::{Map, Item};
      
      pub const CURRENT_SESSION: Item<LotterySession> = Item::new("current_session");
      pub const COMMITMENTS: Map<&Addr, Commitment> = Map::new("commitments");
      pub const CONFIG: Item<Config> = Item::new("config");
    
  error_pattern:
    description: "é”™è¯¯å¤„ç†æ¨¡å¼"
    implementation: "ä½¿ç”¨thiserrorå®šä¹‰è‡ªå®šä¹‰é”™è¯¯"
    example: |
      use thiserror::Error;
      
      #[derive(Error, Debug, PartialEq)]
      pub enum ContractError {
          #[error("Invalid phase for this operation")]
          InvalidPhase,
          #[error("Invalid commitment hash")]
          InvalidCommitment,
          #[error("User already placed bet")]
          AlreadyBet,
      }
    
  message_pattern:
    description: "æ¶ˆæ¯æ¨¡å¼"
    implementation: "ä½¿ç”¨serdeåºåˆ—åŒ–çš„æ¶ˆæ¯ç»“æ„"
    example: |
      use serde::{Deserialize, Serialize};
      
      #[derive(Serialize, Deserialize, Clone, Debug, PartialEq)]
      pub struct InstantiateMsg {
          pub admin: String,
          pub service_fee_rate: Decimal,
          pub min_bet_amount: Uint128,
          pub max_bet_amount: Uint128,
      }
    
  phase_pattern:
    description: "é˜¶æ®µç®¡ç†æ¨¡å¼"
    implementation: "ä½¿ç”¨æšä¸¾å®šä¹‰å½©ç¥¨é˜¶æ®µ"
    example: |
      #[derive(Serialize, Deserialize, Clone, Debug, PartialEq)]
      pub enum LotteryPhase {
          Commitment,    // 0-5999
          Reveal,        // 6000-8999
          Settlement,    // 9000-9999
      }
```

### 2. æ¨èè®¾è®¡æ¨¡å¼

```yaml
recommended_patterns:
  factory_pattern:
    description: "å·¥å‚æ¨¡å¼"
    usage: "åˆ›å»ºå½©ç¥¨ä¼šè¯å’Œå‚ä¸è€…å®ä¾‹"
    implementation: "ä½¿ç”¨new()æ–¹æ³•åˆ›å»ºç»“æ„ä½“"
    
  strategy_pattern:
    description: "ç­–ç•¥æ¨¡å¼"
    usage: "ä¸åŒé˜¶æ®µçš„å¤„ç†ç­–ç•¥"
    implementation: "ä½¿ç”¨traitå®šä¹‰é˜¶æ®µå¤„ç†ç­–ç•¥"
    
  observer_pattern:
    description: "è§‚å¯Ÿè€…æ¨¡å¼"
    usage: "äº‹ä»¶é€šçŸ¥æœºåˆ¶"
    implementation: "ä½¿ç”¨CosmWasmäº‹ä»¶ç³»ç»Ÿ"
    
  command_pattern:
    description: "å‘½ä»¤æ¨¡å¼"
    usage: "å°è£…æ‰§è¡Œæ“ä½œ"
    implementation: "ä½¿ç”¨ExecuteMsgæšä¸¾"
```

## ğŸš« æ˜ç¡®ç¦æ­¢é¡¹

### 1. ç¦æ­¢ä½¿ç”¨å¤–éƒ¨åŠ å¯†åº“

**é‡è¦å®‰å…¨çº¦æŸ**ï¼šç¦æ­¢ä½¿ç”¨ä»»ä½•å¤–éƒ¨åŠ å¯†åº“ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

```yaml
prohibited_crypto_libraries:
  ed25519_libraries:
    - "ed25519-zebra"
    - "ed25519-dalek"
    - "ed25519"
    description: "ç¦æ­¢ä½¿ç”¨å¤–éƒ¨Ed25519å®ç°"
    reason: "CosmWasmå·²æä¾›å†…ç½®åŠ å¯†åŠŸèƒ½"
    
  secp256k1_libraries:
    - "secp256k1"
    - "secp256k1-sys"
    description: "ç¦æ­¢ä½¿ç”¨å¤–éƒ¨Secp256k1å®ç°"
    reason: "CosmWasmå·²æä¾›å†…ç½®åŠ å¯†åŠŸèƒ½"
    
  general_crypto_libraries:
    - "ring"
    - "openssl"
    - "rustls"
    - "crypto"
    description: "ç¦æ­¢ä½¿ç”¨é€šç”¨åŠ å¯†åº“"
    reason: "å¢åŠ æ”»å‡»é¢ï¼Œè¿åCosmWasmæœ€ä½³å®è·µ"
```

**ç¦æ­¢åŸå› è¯¦è§£**ï¼š

1. **å®‰å…¨é£é™©**ï¼š
   - å¤–éƒ¨åŠ å¯†åº“å¯èƒ½åŒ…å«æœªå®¡è®¡çš„ä»£ç 
   - å¢åŠ ä¾èµ–é“¾æ”»å‡»é¢
   - éš¾ä»¥ç¡®ä¿æ‰€æœ‰ä¾èµ–çš„å®‰å…¨æ€§

2. **ç‰ˆæœ¬æ§åˆ¶é£é™©**ï¼š
   - å¤–éƒ¨åº“ç‰ˆæœ¬æ›´æ–°å¯èƒ½å¼•å…¥ç ´åæ€§å˜æ›´
   - éš¾ä»¥æ§åˆ¶ä¾èµ–çš„æ›´æ–°æ—¶æœº
   - å¯èƒ½å¼•å…¥æ–°çš„å®‰å…¨æ¼æ´

3. **å®¡è®¡å¤æ‚æ€§**ï¼š
   - æ™ºèƒ½åˆçº¦éœ€è¦å®Œå…¨å¯å®¡è®¡
   - å¤–éƒ¨ä¾èµ–å¢åŠ äº†å®¡è®¡å¤æ‚åº¦
   - éš¾ä»¥ç¡®ä¿æ‰€æœ‰ä¾èµ–éƒ½æ˜¯å®‰å…¨çš„

4. **CosmWasm ç”Ÿæ€æœ€ä½³å®è·µ**ï¼š
   - CosmWasm å·²ç»æä¾›äº†æ‰€æœ‰å¿…è¦çš„åŠ å¯†åŠŸèƒ½
   - å®˜æ–¹åº“ç»è¿‡å……åˆ†æµ‹è¯•å’Œå®¡è®¡
   - ä¸ CosmWasm è¿è¡Œæ—¶å®Œå…¨å…¼å®¹

**æ¨èæ›¿ä»£æ–¹æ¡ˆ**ï¼š

```rust
// âœ… æ¨èï¼šä½¿ç”¨ CosmWasm å†…ç½®åŠŸèƒ½
use cosmwasm_std::{
    Addr, 
    CanonicalAddr,
    // å†…ç½®çš„åœ°å€éªŒè¯å’ŒåŠ å¯†åŠŸèƒ½
};

// âœ… æ¨èï¼šä½¿ç”¨ CosmWasm å®˜æ–¹åŠ å¯†åº“
use cosmwasm_crypto::*;

// âŒ ç¦æ­¢ï¼šä½¿ç”¨å¤–éƒ¨åŠ å¯†åº“
use ed25519_zebra::*;
use secp256k1::*;
```

### 2. ç¦æ­¢ä½¿ç”¨çš„åº“

```yaml
prohibited_libraries:
  unsafe_libraries:
    - "std::ptr"
    - "std::mem::transmute"
    - "std::mem::forget"
    - "std::mem::zeroed"
    description: "ç¦æ­¢ä½¿ç”¨unsafeä»£ç "
    reason: "æ™ºèƒ½åˆçº¦å®‰å…¨è¦æ±‚"
    
  external_crates:
    - "tokio"
    - "async-std"
    - "futures"
    - "rayon"
    - "ed25519-zebra"  # ç¦æ­¢ä½¿ç”¨å¤–éƒ¨åŠ å¯†åº“
    - "ed25519-dalek"  # ç¦æ­¢ä½¿ç”¨å¤–éƒ¨åŠ å¯†åº“
    - "secp256k1"      # ç¦æ­¢ä½¿ç”¨å¤–éƒ¨åŠ å¯†åº“
    - "ring"           # ç¦æ­¢ä½¿ç”¨å¤–éƒ¨åŠ å¯†åº“
    description: "ç¦æ­¢ä½¿ç”¨å¼‚æ­¥è¿è¡Œæ—¶å’Œå¤–éƒ¨åŠ å¯†åº“"
    reason: "CosmWasmä¸æ”¯æŒå¼‚æ­¥ï¼Œå¤–éƒ¨åŠ å¯†åº“å­˜åœ¨å®‰å…¨é£é™©"
    
  network_crates:
    - "reqwest"
    - "hyper"
    - "curl"
    - "ureq"
    description: "ç¦æ­¢ä½¿ç”¨ç½‘ç»œè¯·æ±‚åº“"
    reason: "æ™ºèƒ½åˆçº¦ä¸èƒ½å‘èµ·å¤–éƒ¨è¯·æ±‚"
    
  file_system_crates:
    - "std::fs"
    - "std::path"
    - "walkdir"
    - "glob"
    description: "ç¦æ­¢ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ“ä½œ"
    reason: "æ™ºèƒ½åˆçº¦æ— æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™"
    
  random_crates:
    - "rand"
    - "fastrand"
    - "getrandom"
    description: "ç¦æ­¢ä½¿ç”¨éšæœºæ•°ç”Ÿæˆå™¨"
    reason: "æ™ºèƒ½åˆçº¦éœ€è¦ç¡®å®šæ€§æ‰§è¡Œ"
    
  time_crates:
    - "chrono"
    - "time"
    description: "ç¦æ­¢ä½¿ç”¨æ—¶é—´åº“"
    reason: "ä½¿ç”¨CosmWasmçš„Env::block.time"
    
  math_crates:
    - "num-bigint"
    - "bigdecimal"
    description: "ç¦æ­¢ä½¿ç”¨å¤§æ•°åº“"
    reason: "ä½¿ç”¨CosmWasmçš„Uint128å’ŒDecimal"
```

### 2. ç¦æ­¢çš„è®¾è®¡æ¨¡å¼

```yaml
prohibited_patterns:
  singleton_pattern:
    description: "ç¦æ­¢å•ä¾‹æ¨¡å¼"
    reason: "æ™ºèƒ½åˆçº¦çŠ¶æ€æ˜¯å…¨å±€çš„"
    
  mutable_global_state:
    description: "ç¦æ­¢å¯å˜å…¨å±€çŠ¶æ€"
    reason: "ä½¿ç”¨CosmWasmå­˜å‚¨ç³»ç»Ÿ"
    
  recursive_calls:
    description: "ç¦æ­¢é€’å½’è°ƒç”¨"
    reason: "å¯èƒ½å¯¼è‡´æ ˆæº¢å‡º"
    
  infinite_loops:
    description: "ç¦æ­¢æ— é™å¾ªç¯"
    reason: "å¯èƒ½å¯¼è‡´Gasè€—å°½"
    
  dynamic_dispatch:
    description: "ç¦æ­¢åŠ¨æ€åˆ†å‘"
    reason: "å½±å“æ€§èƒ½å’ŒGasæ¶ˆè€—"
    
  heap_allocation:
    description: "ç¦æ­¢å †åˆ†é…"
    reason: "æ™ºèƒ½åˆçº¦å†…å­˜é™åˆ¶"
```

### 3. ç¦æ­¢çš„ç¼–ç¨‹å®è·µ

```yaml
prohibited_practices:
  panic_usage:
    description: "ç¦æ­¢ä½¿ç”¨panic!"
    reason: "ä¼šå¯¼è‡´åˆçº¦æ‰§è¡Œå¤±è´¥"
    alternative: "ä½¿ç”¨Resultç±»å‹å¤„ç†é”™è¯¯"
    
  unwrap_usage:
    description: "ç¦æ­¢ä½¿ç”¨unwrap()"
    reason: "å¯èƒ½å¯¼è‡´panic"
    alternative: "ä½¿ç”¨expect()æˆ–matchå¤„ç†"
    
  clone_excessive:
    description: "ç¦æ­¢è¿‡åº¦ä½¿ç”¨clone()"
    reason: "å½±å“æ€§èƒ½å’ŒGasæ¶ˆè€—"
    alternative: "ä½¿ç”¨å¼•ç”¨æˆ–ç§»åŠ¨è¯­ä¹‰"
    
  string_concatenation:
    description: "ç¦æ­¢å­—ç¬¦ä¸²æ‹¼æ¥"
    reason: "å½±å“æ€§èƒ½"
    alternative: "ä½¿ç”¨format!å®"
    
  vector_growth:
    description: "ç¦æ­¢åŠ¨æ€å¢é•¿å‘é‡"
    reason: "å¯èƒ½å¯¼è‡´å†…å­˜ä¸è¶³"
    alternative: "é¢„åˆ†é…å›ºå®šå¤§å°"
    
  floating_point:
    description: "ç¦æ­¢ä½¿ç”¨æµ®ç‚¹æ•°"
    reason: "ç²¾åº¦é—®é¢˜"
    alternative: "ä½¿ç”¨Decimalç±»å‹"
```

## ğŸ”§ ç¬¬ä¸‰æ–¹æœåŠ¡çº¦æŸ

### 1. å…è®¸çš„æœåŠ¡

```yaml
allowed_services:
  cosmwasm_services:
    - "cosmwasm-std"
    - "cw-storage-plus"
    - "cw-utils"
    - "cw2"
    description: "CosmWasmå®˜æ–¹æœåŠ¡"
    
  serde_services:
    - "serde"
    - "serde_json"
    description: "åºåˆ—åŒ–æœåŠ¡"
    
  thiserror_service:
    - "thiserror"
    description: "é”™è¯¯å¤„ç†æœåŠ¡"
    
  crypto_services:
    - "sha2"
    - "cosmwasm-crypto"
    description: "åŠ å¯†æœåŠ¡"
    
  schema_services:
    - "cosmwasm-schema"
    - "schemars"
    description: "æ¨¡å¼ç”ŸæˆæœåŠ¡"
    
  decentralized_services:
    - "dd_algorithms_lib"
    description: "å»ä¸­å¿ƒåŒ–ç®—æ³•æœåŠ¡"
```

### 2. ç¦æ­¢çš„æœåŠ¡

```yaml
prohibited_services:
  external_apis:
    - "HTTP APIs"
    - "REST APIs"
    - "GraphQL APIs"
    - "WebSocket APIs"
    description: "ç¦æ­¢å¤–éƒ¨APIè°ƒç”¨"
    reason: "æ™ºèƒ½åˆçº¦ä¸èƒ½å‘èµ·å¤–éƒ¨è¯·æ±‚"
    
  databases:
    - "PostgreSQL"
    - "MySQL"
    - "MongoDB"
    - "Redis"
    - "SQLite"
    description: "ç¦æ­¢å¤–éƒ¨æ•°æ®åº“"
    reason: "ä½¿ç”¨CosmWasmå­˜å‚¨ç³»ç»Ÿ"
    
  message_queues:
    - "RabbitMQ"
    - "Kafka"
    - "Redis Pub/Sub"
    - "Amazon SQS"
    description: "ç¦æ­¢æ¶ˆæ¯é˜Ÿåˆ—"
    reason: "æ™ºèƒ½åˆçº¦æ— å¤–éƒ¨é€šä¿¡èƒ½åŠ›"
    
  cloud_services:
    - "AWS S3"
    - "Google Cloud Storage"
    - "Azure Blob Storage"
    description: "ç¦æ­¢äº‘å­˜å‚¨æœåŠ¡"
    reason: "æ™ºèƒ½åˆçº¦æ— å¤–éƒ¨å­˜å‚¨è®¿é—®"
    
  monitoring_services:
    - "Prometheus"
    - "Grafana"
    - "DataDog"
    description: "ç¦æ­¢å¤–éƒ¨ç›‘æ§æœåŠ¡"
    reason: "ä½¿ç”¨CosmWasmäº‹ä»¶ç³»ç»Ÿ"
```

## ğŸ“ æ€§èƒ½çº¦æŸ

### 1. Gasä½¿ç”¨é™åˆ¶

```yaml
gas_constraints:
  max_gas_per_operation:
    place_bet: 50000
    reveal_random: 40000
    settle_lottery: 100000
    query_operations: 20000
    admin_operations: 30000
    description: "æ¯ä¸ªæ“ä½œçš„æœ€å¤§Gasä½¿ç”¨é‡"
    
  optimization_requirements:
    - "ä½¿ç”¨æ‰¹é‡æ“ä½œå‡å°‘äº¤æ˜“æ•°é‡"
    - "ä¼˜åŒ–å­˜å‚¨ç»“æ„å‡å°‘è¯»å†™æ¬¡æ•°"
    - "ä½¿ç”¨ç´¢å¼•æé«˜æŸ¥è¯¢æ•ˆç‡"
    - "ç¼“å­˜å¸¸ç”¨æ•°æ®é¿å…é‡å¤è®¡ç®—"
    - "é¿å…ä¸å¿…è¦çš„å…‹éš†æ“ä½œ"
    - "ä½¿ç”¨å¼•ç”¨ä¼ é€’å¤§å¯¹è±¡"
```

### 2. å­˜å‚¨é™åˆ¶

```yaml
storage_constraints:
  max_storage_per_session:
    size: "10KB"
    description: "æ¯ä¸ªå½©ç¥¨ä¼šè¯çš„æœ€å¤§å­˜å‚¨ç©ºé—´"
    
  max_storage_per_participant:
    size: "1KB"
    description: "æ¯ä¸ªå‚ä¸è€…çš„æœ€å¤§å­˜å‚¨ç©ºé—´"
    
  max_total_sessions:
    count: 10000
    description: "æœ€å¤§å†å²ä¼šè¯æ•°é‡"
    
  storage_optimization:
    - "ä½¿ç”¨å‹ç¼©å­˜å‚¨"
    - "é¿å…å†—ä½™æ•°æ®"
    - "å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®"
    - "ä½¿ç”¨Mapæ›¿ä»£Vecå­˜å‚¨å¤§é‡æ•°æ®"
    - "åˆå¹¶ç›¸å…³å­—æ®µå‡å°‘å­˜å‚¨å¼€é”€"
```

### 3. è®¡ç®—é™åˆ¶

```yaml
computation_constraints:
  max_participants_per_session:
    count: 1000
    description: "æ¯ä¸ªä¼šè¯çš„æœ€å¤§å‚ä¸è€…æ•°"
    
  max_calculation_complexity:
    operations: 10000
    description: "å•æ¬¡æ“ä½œçš„æœ€å¤§è®¡ç®—å¤æ‚åº¦"
    
  optimization_requirements:
    - "ä½¿ç”¨é«˜æ•ˆçš„å“ˆå¸Œç®—æ³•"
    - "é¿å…åµŒå¥—å¾ªç¯"
    - "é¢„è®¡ç®—å¸¸ç”¨å€¼"
    - "ä½¿ç”¨ä½è¿ç®—æ›¿ä»£ç®—æœ¯è¿ç®—"
    - "æ‰¹é‡å¤„ç†ç›¸ä¼¼æ“ä½œ"
```

## ğŸ”’ å®‰å…¨çº¦æŸ

### 1. è®¿é—®æ§åˆ¶

```yaml
access_control:
  admin_functions:
    - "update_config"
    - "emergency_pause"
    - "withdraw_service_fee"
    description: "åªæœ‰ç®¡ç†å‘˜å¯ä»¥è°ƒç”¨"
    
  user_functions:
    - "place_bet"
    - "reveal_random"
    description: "ç”¨æˆ·åªèƒ½è°ƒç”¨è‡ªå·±çš„å‡½æ•°"
    
  public_functions:
    - "settle_lottery"
    - "query_operations"
    description: "ä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨"
    
  phase_restricted_functions:
    place_bet:
      allowed_phases: ["Commitment"]
    reveal_random:
      allowed_phases: ["Reveal"]
    settle_lottery:
      allowed_phases: ["Settlement"]
    description: "é˜¶æ®µé™åˆ¶çš„å‡½æ•°"
```

### 2. è¾“å…¥éªŒè¯

```yaml
input_validation:
  address_validation:
    pattern: "^cosmwasm[a-z0-9]{38}$"
    description: "åœ°å€æ ¼å¼éªŒè¯"
    
  bet_amount_validation:
    min: "1000"
    max: "1000000"
    pattern: "^[0-9]+$"
    description: "æŠ•æ³¨é‡‘é¢éªŒè¯"
    
  lucky_numbers_validation:
    count: 3
    min_value: 0
    max_value: 999
    description: "å¹¸è¿æ•°å­—éªŒè¯"
    
  commitment_hash_validation:
    pattern: "^[a-f0-9]{64}$"
    description: "æ‰¿è¯ºå“ˆå¸ŒéªŒè¯"
    
  string_validation:
    max_length: 100
    description: "å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶"
    
  decimal_validation:
    max_precision: 18
    description: "å°æ•°ç²¾åº¦é™åˆ¶"
```

### 3. é˜²æ”»å‡»æªæ–½

```yaml
security_measures:
  reentrancy_protection:
    implementation: "ä½¿ç”¨é‡å…¥é”"
    description: "é˜²æ­¢é‡å…¥æ”»å‡»"
    
  overflow_protection:
    implementation: "ä½¿ç”¨checked_*æ–¹æ³•"
    description: "é˜²æ­¢æ•´æ•°æº¢å‡º"
    
  underflow_protection:
    implementation: "ä½¿ç”¨checked_*æ–¹æ³•"
    description: "é˜²æ­¢æ•´æ•°ä¸‹æº¢"
    
  commitment_scheme:
    implementation: "ä½¿ç”¨SHA256å“ˆå¸Œ"
    description: "é˜²æ­¢æå‰æ³„éœ²"
    
  phase_validation:
    implementation: "åŸºäºåŒºå—é«˜åº¦éªŒè¯"
    description: "é˜²æ­¢é˜¶æ®µæ”»å‡»"
    
  amount_validation:
    implementation: "ä¸¥æ ¼çš„èŒƒå›´æ£€æŸ¥"
    description: "é˜²æ­¢é‡‘é¢æ”»å‡»"
```

## ğŸ§ª æµ‹è¯•çº¦æŸ

### 1. æµ‹è¯•æ¡†æ¶

```yaml
testing_frameworks:
  cosmwasm-testing:
    version: ">= 2.2.2"
    description: "CosmWasmæµ‹è¯•æ¡†æ¶"
    usage: "åˆçº¦æµ‹è¯•"
    
  cw-multi-test:
    version: ">= 0.16.0"
    description: "å¤šåˆçº¦æµ‹è¯•æ¡†æ¶"
    usage: "é›†æˆæµ‹è¯•"
    
  rust_test:
    version: ">= 1.70.0"
    description: "Rustå†…ç½®æµ‹è¯•æ¡†æ¶"
    usage: "å•å…ƒæµ‹è¯•"
```

### 2. æµ‹è¯•è¦æ±‚

```yaml
testing_requirements:
  unit_tests:
    coverage: ">= 95%"
    description: "å•å…ƒæµ‹è¯•è¦†ç›–ç‡"
    
  integration_tests:
    required: true
    description: "å¿…é¡»åŒ…å«é›†æˆæµ‹è¯•"
    
  security_tests:
    required: true
    description: "å¿…é¡»åŒ…å«å®‰å…¨æµ‹è¯•"
    
  performance_tests:
    required: true
    description: "å¿…é¡»åŒ…å«æ€§èƒ½æµ‹è¯•"
    
  phase_tests:
    required: true
    description: "å¿…é¡»åŒ…å«é˜¶æ®µè½¬æ¢æµ‹è¯•"
    
  edge_case_tests:
    required: true
    description: "å¿…é¡»åŒ…å«è¾¹ç•Œæ¡ä»¶æµ‹è¯•"
```

## ğŸ“š æ–‡æ¡£çº¦æŸ

### 1. å¿…éœ€æ–‡æ¡£

```yaml
required_documentation:
  - "README.md"
  - "01-ç»“æ„åŒ–éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦.md"
  - "02-ç²¾ç¡®æ¥å£å¥‘çº¦.md"
  - "03-æ¶æ„ä¸è®¾è®¡çº¦æŸ.md"
  - "04-éåŠŸèƒ½æ€§éœ€æ±‚é‡åŒ–æŒ‡æ ‡.md"
  - "05-è¿‡ç¨‹ä¸å†³ç­–è®°å½•.md"
  - "06-éªŒè¯ä¸è´¨é‡ä¿éšœ.md"
  - "07-éƒ¨ç½²ä¸è¿ç»´.md"
  - "08-CosmWasmåˆçº¦è§„èŒƒåˆè§„æ€§.md"
  description: "å¿…é¡»åŒ…å«çš„æ–‡æ¡£"
```

### 2. ä»£ç æ³¨é‡Šè¦æ±‚

```yaml
code_documentation:
  function_comments:
    required: true
    format: "Rust doc comments"
    example: |
      /// æŠ•æ³¨æ“ä½œ - åœ¨æ‰¿è¯ºé˜¶æ®µæ‰§è¡Œ
      /// 
      /// # Arguments
      /// * `deps` - ä¾èµ–é¡¹
      /// * `env` - ç¯å¢ƒä¿¡æ¯
      /// * `info` - æ¶ˆæ¯ä¿¡æ¯
      /// * `commitment_hash` - æ‰¿è¯ºå“ˆå¸Œ
      /// 
      /// # Returns
      /// * `Result<Response, ContractError>` - æ‰§è¡Œç»“æœ
      /// 
      /// # Errors
      /// * `InvalidPhase` - å½“å‰é˜¶æ®µä¸å…è®¸æŠ•æ³¨
      /// * `AlreadyBet` - ç”¨æˆ·å·²æŠ•æ³¨
      /// * `InvalidCommitment` - æ— æ•ˆçš„æ‰¿è¯ºå“ˆå¸Œ
      pub fn place_bet(
          deps: DepsMut,
          env: Env,
          info: MessageInfo,
          commitment_hash: String,
      ) -> Result<Response, ContractError> {
          // å®ç°ä»£ç 
      }
    
  struct_comments:
    required: true
    format: "Rust doc comments"
    example: |
      /// å½©ç¥¨ä¼šè¯ä¿¡æ¯
      #[derive(Serialize, Deserialize, Clone, Debug, PartialEq)]
      pub struct LotterySession {
          /// ä¼šè¯å”¯ä¸€æ ‡è¯†ç¬¦
          pub session_id: String,
          /// å½“å‰é˜¶æ®µ
          pub phase: LotteryPhase,
          /// æ€»å¥–é‡‘æ± 
          pub total_pool: Uint128,
          /// æœåŠ¡è´¹
          pub service_fee: Uint128,
          /// å‚ä¸è€…åˆ—è¡¨
          pub participants: Vec<Participant>,
          /// åˆ›å»ºåŒºå—é«˜åº¦
          pub created_height: u64,
          /// ä¸­å¥–å·ç 
          pub winning_number: Option<u16>,
          /// æ˜¯å¦å·²ç»“ç®—
          pub settled: bool,
      }
    
  module_comments:
    required: true
    format: "Rust doc comments"
    example: |
      //! å½©ç¥¨é€»è¾‘æ¨¡å—
      //! 
      //! æœ¬æ¨¡å—åŒ…å«å½©ç¥¨çš„æ ¸å¿ƒé€»è¾‘ï¼ŒåŒ…æ‹¬ï¼š
      //! - é˜¶æ®µç®¡ç†
      //! - æŠ•æ³¨å¤„ç†
      //! - éšæœºæ•°ç”Ÿæˆ
      //! - å¥–é‡‘åˆ†é…
      //! 
      //! # å®‰å…¨æ³¨æ„äº‹é¡¹
      //! - æ‰€æœ‰éšæœºæ•°ç”Ÿæˆéƒ½åŸºäºç”¨æˆ·è¾“å…¥
      //! - æ‰¿è¯º-æ­ç§˜æœºåˆ¶é˜²æ­¢æå‰æ³„éœ²
      //! - é˜¶æ®µéªŒè¯ç¡®ä¿æ“ä½œæ—¶åºæ­£ç¡®
```

## ğŸ”„ ç‰ˆæœ¬æ§åˆ¶çº¦æŸ

### 1. ç‰ˆæœ¬ç®¡ç†

```yaml
version_management:
  semantic_versioning:
    required: true
    format: "MAJOR.MINOR.PATCH"
    description: "å¿…é¡»ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶"
    
  breaking_changes:
    documentation: "å¿…é¡»è®°å½•æ‰€æœ‰ç ´åæ€§å˜æ›´"
    migration_guide: "å¿…é¡»æä¾›è¿ç§»æŒ‡å—"
    
  deprecation_policy:
    notice_period: "è‡³å°‘ä¸€ä¸ªç‰ˆæœ¬å‘¨æœŸ"
    description: "åºŸå¼ƒåŠŸèƒ½å¿…é¡»æå‰é€šçŸ¥"
```

### 2. å…¼å®¹æ€§è¦æ±‚

```yaml
compatibility_requirements:
  backward_compatibility:
    required: true
    description: "å¿…é¡»ä¿æŒå‘åå…¼å®¹æ€§"
    
  forward_compatibility:
    recommended: true
    description: "å»ºè®®ä¿æŒå‘å‰å…¼å®¹æ€§"
    
  api_stability:
    required: true
    description: "APIå¿…é¡»ä¿æŒç¨³å®š"
    
  storage_compatibility:
    required: true
    description: "å­˜å‚¨æ ¼å¼å¿…é¡»å…¼å®¹"
```

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | å˜æ›´äºº |
|------|------|----------|--------|
| v1.0 | 2024-01-XX | åˆå§‹çº¦æŸæ–‡æ¡£åˆ›å»º | AI Assistant |

---

**æ³¨æ„**: æœ¬æ–‡æ¡£çº¦æŸAIçš„è®¾è®¡ç©ºé—´ï¼Œç¡®ä¿æŠ€æœ¯æ–¹æ¡ˆç¬¦åˆå›¢é˜Ÿæˆ˜ç•¥ã€å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§è¦æ±‚ã€‚ä»»ä½•æŠ€æœ¯é€‰æ‹©éƒ½å¿…é¡»ç¬¦åˆè¿™äº›çº¦æŸã€‚
