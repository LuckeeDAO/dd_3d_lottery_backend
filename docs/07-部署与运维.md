# DD 3D å½©ç¥¨æ™ºèƒ½åˆçº¦ éƒ¨ç½²ä¸è¿ç»´

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®åç§°**: DD 3D Lottery (3Då½©ç¥¨æ™ºèƒ½åˆçº¦)
- **ç‰ˆæœ¬**: v1.0
- **æ–‡æ¡£ç±»å‹**: éƒ¨ç½²ä¸è¿ç»´
- **åˆ›å»ºæ—¥æœŸ**: 2024-01-XX
- **æœ€åæ›´æ–°**: 2024-01-XX

## ğŸ¯ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†DD 3D Lotteryæ™ºèƒ½åˆçº¦çš„éƒ¨ç½²æµç¨‹ã€è¿ç»´ç®¡ç†ã€ç›‘æ§å‘Šè­¦ã€æ•…éšœå¤„ç†å’Œæ€§èƒ½ä¼˜åŒ–ç­‰è¿ç»´ç›¸å…³å†…å®¹ã€‚

## ğŸš€ éƒ¨ç½²æµç¨‹

### 1. éƒ¨ç½²ç¯å¢ƒå‡†å¤‡

#### 1.1 ç¯å¢ƒè¦æ±‚

```yaml
environment_requirements:
  hardware:
    cpu: "4æ ¸å¿ƒä»¥ä¸Š"
    memory: "8GBä»¥ä¸Š"
    storage: "100GBä»¥ä¸ŠSSD"
    network: "ç¨³å®šçš„ç½‘ç»œè¿æ¥"
  
  software:
    rust: ">= 1.70.0"
    cosmwasm: ">= 2.2.2"
    wasmd: ">= 0.45.0"
    cosmwasm-opt: ">= 0.16.0"
  
  blockchain:
    chain_id: "æŒ‡å®šé“¾ID"
    rpc_url: "RPCèŠ‚ç‚¹åœ°å€"
    gas_price: "Gasä»·æ ¼è®¾ç½®"
    account: "éƒ¨ç½²è´¦æˆ·"
```

#### 1.2 ç¯å¢ƒé…ç½®

```bash
# 1. å®‰è£…Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

# 2. å®‰è£…wasmd
git clone https://github.com/CosmWasm/wasmd.git
cd wasmd
make install

# 3. å®‰è£…cosmwasm-opt
cargo install cosmwasm-opt

# 4. é…ç½®ç¯å¢ƒå˜é‡
export CHAIN_ID="your-chain-id"
export RPC_URL="https://your-rpc-url"
export GAS_PRICE="0.025stake"
export ACCOUNT_NAME="deployer"
```

### 2. åˆçº¦æ„å»º

#### 2.1 æ„å»ºæ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/dd-3d-lottery.git
cd dd-3d-lottery

# 2. å®‰è£…ä¾èµ–
cargo check

# 3. è¿è¡Œæµ‹è¯•
cargo test

# 4. æ„å»ºåˆçº¦
cargo build --release --target wasm32-unknown-unknown

# 5. ä¼˜åŒ–WASM
cosmwasm-opt target/wasm32-unknown-unknown/release/dd_3d_lottery.wasm \
  -o target/wasm32-unknown-unknown/release/dd_3d_lottery_optimized.wasm
```

#### 2.2 æ„å»ºéªŒè¯

```bash
# éªŒè¯WASMæ–‡ä»¶
wasmd query wasm code-info <code-id>

# æ£€æŸ¥æ–‡ä»¶å¤§å°
ls -lh target/wasm32-unknown-unknown/release/dd_3d_lottery_optimized.wasm

# éªŒè¯æ–‡ä»¶å®Œæ•´æ€§
sha256sum target/wasm32-unknown-unknown/release/dd_3d_lottery_optimized.wasm
```

### 3. åˆçº¦éƒ¨ç½²

#### 3.1 éƒ¨ç½²æ­¥éª¤

```bash
# 1. ä¸Šä¼ åˆçº¦ä»£ç 
wasmd tx wasm store target/wasm32-unknown-unknown/release/dd_3d_lottery_optimized.wasm \
  --from $ACCOUNT_NAME \
  --gas auto \
  --gas-adjustment 1.3 \
  --chain-id $CHAIN_ID \
  --node $RPC_URL \
  --yes

# 2. è·å–ä»£ç ID
CODE_ID=$(wasmd query tx <tx-hash> --output json | jq -r '.logs[0].events[0].attributes[0].value')

# 3. å®ä¾‹åŒ–åˆçº¦
wasmd tx wasm instantiate $CODE_ID '{
  "admin": "cosmwasm1...",
  "service_fee_rate": "0.1",
  "min_bet_amount": "1000",
  "max_bet_amount": "1000000"
}' \
  --from $ACCOUNT_NAME \
  --admin $ADMIN_ADDRESS \
  --label "DD 3D Lottery v1.0" \
  --chain-id $CHAIN_ID \
  --node $RPC_URL \
  --yes

# 4. è·å–åˆçº¦åœ°å€
CONTRACT_ADDRESS=$(wasmd query tx <tx-hash> --output json | jq -r '.logs[0].events[0].attributes[0].value')
```

#### 3.2 éƒ¨ç½²éªŒè¯

```bash
# 1. éªŒè¯åˆçº¦å®ä¾‹åŒ–
wasmd query wasm contract $CONTRACT_ADDRESS

# 2. æµ‹è¯•æŸ¥è¯¢æ¥å£
wasmd query wasm contract-state smart $CONTRACT_ADDRESS '{"get_config": {}}'

# 3. æµ‹è¯•æ‰§è¡Œæ¥å£
wasmd tx wasm execute $CONTRACT_ADDRESS '{"get_current_phase": {}}' \
  --from $ACCOUNT_NAME \
  --chain-id $CHAIN_ID \
  --node $RPC_URL \
  --yes

# 4. éªŒè¯åˆçº¦ç‰ˆæœ¬
wasmd query wasm contract-state smart $CONTRACT_ADDRESS '{"get_version": {}}'
```

### 4. éƒ¨ç½²è„šæœ¬

#### 4.1 è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash
# deploy.sh - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

set -e

# é…ç½®å˜é‡
CHAIN_ID=${CHAIN_ID:-"testnet"}
RPC_URL=${RPC_URL:-"https://rpc.testnet.cosmos.network"}
ACCOUNT_NAME=${ACCOUNT_NAME:-"deployer"}
ADMIN_ADDRESS=${ADMIN_ADDRESS:-"cosmwasm1..."}
SERVICE_FEE_RATE=${SERVICE_FEE_RATE:-"0.1"}
MIN_BET_AMOUNT=${MIN_BET_AMOUNT:-"1000"}
MAX_BET_AMOUNT=${MAX_BET_AMOUNT:-"1000000"}

echo "å¼€å§‹éƒ¨ç½²DD 3D Lotteryåˆçº¦..."

# 1. æ„å»ºåˆçº¦
echo "æ„å»ºåˆçº¦..."
cargo build --release --target wasm32-unknown-unknown

# 2. ä¼˜åŒ–WASM
echo "ä¼˜åŒ–WASM..."
cosmwasm-opt target/wasm32-unknown-unknown/release/dd_3d_lottery.wasm \
  -o target/wasm32-unknown-unknown/release/dd_3d_lottery_optimized.wasm

# 3. ä¸Šä¼ åˆçº¦
echo "ä¸Šä¼ åˆçº¦..."
TX_HASH=$(wasmd tx wasm store target/wasm32-unknown-unknown/release/dd_3d_lottery_optimized.wasm \
  --from $ACCOUNT_NAME \
  --gas auto \
  --gas-adjustment 1.3 \
  --chain-id $CHAIN_ID \
  --node $RPC_URL \
  --yes \
  --output json | jq -r '.txhash')

echo "ä¸Šä¼ äº¤æ˜“å“ˆå¸Œ: $TX_HASH"

# 4. ç­‰å¾…ç¡®è®¤
echo "ç­‰å¾…äº¤æ˜“ç¡®è®¤..."
sleep 10

# 5. è·å–ä»£ç ID
CODE_ID=$(wasmd query tx $TX_HASH --output json | jq -r '.logs[0].events[0].attributes[0].value')
echo "ä»£ç ID: $CODE_ID"

# 6. å®ä¾‹åŒ–åˆçº¦
echo "å®ä¾‹åŒ–åˆçº¦..."
INSTANTIATE_MSG=$(cat <<EOF
{
  "admin": "$ADMIN_ADDRESS",
  "service_fee_rate": "$SERVICE_FEE_RATE",
  "min_bet_amount": "$MIN_BET_AMOUNT",
  "max_bet_amount": "$MAX_BET_AMOUNT"
}
EOF
)

INSTANTIATE_TX_HASH=$(wasmd tx wasm instantiate $CODE_ID "$INSTANTIATE_MSG" \
  --from $ACCOUNT_NAME \
  --admin $ADMIN_ADDRESS \
  --label "DD 3D Lottery v1.0" \
  --chain-id $CHAIN_ID \
  --node $RPC_URL \
  --yes \
  --output json | jq -r '.txhash')

echo "å®ä¾‹åŒ–äº¤æ˜“å“ˆå¸Œ: $INSTANTIATE_TX_HASH"

# 7. ç­‰å¾…ç¡®è®¤
echo "ç­‰å¾…å®ä¾‹åŒ–ç¡®è®¤..."
sleep 10

# 8. è·å–åˆçº¦åœ°å€
CONTRACT_ADDRESS=$(wasmd query tx $INSTANTIATE_TX_HASH --output json | jq -r '.logs[0].events[0].attributes[0].value')
echo "åˆçº¦åœ°å€: $CONTRACT_ADDRESS"

# 9. éªŒè¯éƒ¨ç½²
echo "éªŒè¯éƒ¨ç½²..."
wasmd query wasm contract $CONTRACT_ADDRESS

echo "éƒ¨ç½²å®Œæˆï¼"
echo "åˆçº¦åœ°å€: $CONTRACT_ADDRESS"
echo "ä»£ç ID: $CODE_ID"
```

#### 4.2 ç¯å¢ƒé…ç½®è„šæœ¬

```bash
#!/bin/bash
# setup.sh - ç¯å¢ƒé…ç½®è„šæœ¬

set -e

echo "é…ç½®DD 3D Lotteryéƒ¨ç½²ç¯å¢ƒ..."

# 1. æ£€æŸ¥Rustå®‰è£…
if ! command -v rustc &> /dev/null; then
    echo "å®‰è£…Rust..."
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
    source ~/.cargo/env
fi

# 2. æ£€æŸ¥wasmdå®‰è£…
if ! command -v wasmd &> /dev/null; then
    echo "å®‰è£…wasmd..."
    git clone https://github.com/CosmWasm/wasmd.git
    cd wasmd
    make install
    cd ..
fi

# 3. æ£€æŸ¥cosmwasm-optå®‰è£…
if ! command -v cosmwasm-opt &> /dev/null; then
    echo "å®‰è£…cosmwasm-opt..."
    cargo install cosmwasm-opt
fi

# 4. åˆ›å»ºé…ç½®æ–‡ä»¶
cat > .env <<EOF
CHAIN_ID=testnet
RPC_URL=https://rpc.testnet.cosmos.network
ACCOUNT_NAME=deployer
ADMIN_ADDRESS=cosmwasm1...
SERVICE_FEE_RATE=0.1
MIN_BET_AMOUNT=1000
MAX_BET_AMOUNT=1000000
EOF

echo "ç¯å¢ƒé…ç½®å®Œæˆï¼"
echo "è¯·ç¼–è¾‘.envæ–‡ä»¶è®¾ç½®æ­£ç¡®çš„é…ç½®å‚æ•°"
```

## ğŸ”§ è¿ç»´ç®¡ç†

### 1. ç³»ç»Ÿç›‘æ§

#### 1.1 ç›‘æ§æŒ‡æ ‡

```yaml
monitoring_metrics:
  system_metrics:
    - "CPUä½¿ç”¨ç‡"
    - "å†…å­˜ä½¿ç”¨ç‡"
    - "ç£ç›˜ä½¿ç”¨ç‡"
    - "ç½‘ç»œæµé‡"
    - "ç³»ç»Ÿè´Ÿè½½"
  
  application_metrics:
    - "åˆçº¦è°ƒç”¨æ¬¡æ•°"
    - "äº¤æ˜“æˆåŠŸç‡"
    - "Gasæ¶ˆè€—ç»Ÿè®¡"
    - "é”™è¯¯ç‡ç»Ÿè®¡"
    - "å“åº”æ—¶é—´"
  
  business_metrics:
    - "æŠ•æ³¨æ•°é‡"
    - "å¥–é‡‘åˆ†é…"
    - "ç”¨æˆ·æ´»è·ƒåº¦"
    - "æ”¶å…¥ç»Ÿè®¡"
    - "ä¸­å¥–ç‡"
```

#### 1.2 ç›‘æ§å·¥å…·

```yaml
monitoring_tools:
  prometheus:
    description: "æŒ‡æ ‡æ”¶é›†å’Œå­˜å‚¨"
    metrics: ["ç³»ç»ŸæŒ‡æ ‡", "åº”ç”¨æŒ‡æ ‡", "ä¸šåŠ¡æŒ‡æ ‡"]
  
  grafana:
    description: "æŒ‡æ ‡å¯è§†åŒ–å’Œå‘Šè­¦"
    dashboards: ["ç³»ç»Ÿç›‘æ§", "åº”ç”¨ç›‘æ§", "ä¸šåŠ¡ç›‘æ§"]
  
  alertmanager:
    description: "å‘Šè­¦ç®¡ç†"
    channels: ["é‚®ä»¶", "çŸ­ä¿¡", "Slack", "é’‰é’‰"]
  
  custom_monitoring:
    description: "è‡ªå®šä¹‰ç›‘æ§"
    tools: ["CosmWasm Events", "Blockchain Explorer"]
```

### 2. æ—¥å¿—ç®¡ç†

#### 2.1 æ—¥å¿—åˆ†ç±»

```yaml
log_categories:
  system_logs:
    - "ç³»ç»Ÿå¯åŠ¨æ—¥å¿—"
    - "ç³»ç»Ÿé”™è¯¯æ—¥å¿—"
    - "æ€§èƒ½æ—¥å¿—"
    - "å®‰å…¨æ—¥å¿—"
  
  application_logs:
    - "åˆçº¦è°ƒç”¨æ—¥å¿—"
    - "äº¤æ˜“å¤„ç†æ—¥å¿—"
    - "é”™è¯¯å¤„ç†æ—¥å¿—"
    - "ä¸šåŠ¡é€»è¾‘æ—¥å¿—"
  
  audit_logs:
    - "ç®¡ç†å‘˜æ“ä½œæ—¥å¿—"
    - "é…ç½®å˜æ›´æ—¥å¿—"
    - "æƒé™å˜æ›´æ—¥å¿—"
    - "å®‰å…¨äº‹ä»¶æ—¥å¿—"
```

#### 2.2 æ—¥å¿—å¤„ç†

```yaml
log_processing:
  collection:
    tools: ["Fluentd", "Logstash", "Filebeat"]
    sources: ["åº”ç”¨æ—¥å¿—", "ç³»ç»Ÿæ—¥å¿—", "å®¡è®¡æ—¥å¿—"]
  
  storage:
    tools: ["Elasticsearch", "InfluxDB", "ClickHouse"]
    retention: "90å¤©"
    compression: "gzip"
  
  analysis:
    tools: ["Kibana", "Grafana", "Custom Dashboards"]
    alerts: ["é”™è¯¯ç‡å‘Šè­¦", "æ€§èƒ½å‘Šè­¦", "å®‰å…¨å‘Šè­¦"]
```

### 3. å¤‡ä»½æ¢å¤

#### 3.1 å¤‡ä»½ç­–ç•¥

```yaml
backup_strategy:
  data_backup:
    frequency: "æ¯æ—¥"
    retention: "30å¤©"
    location: "å¤šä¸ªåœ°ç†ä½ç½®"
    encryption: "AES-256"
  
  configuration_backup:
    frequency: "æ¯æ¬¡å˜æ›´"
    retention: "90å¤©"
    location: "ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"
    encryption: "GPG"
  
  code_backup:
    frequency: "æ¯æ¬¡å‘å¸ƒ"
    retention: "æ°¸ä¹…"
    location: "Gitä»“åº“"
    encryption: "Gitç­¾å"
```

#### 3.2 æ¢å¤æµç¨‹

```bash
#!/bin/bash
# restore.sh - æ•°æ®æ¢å¤è„šæœ¬

set -e

BACKUP_DATE=${1:-$(date -d "yesterday" +%Y%m%d)}
BACKUP_LOCATION="/backup/$BACKUP_DATE"

echo "å¼€å§‹æ¢å¤æ•°æ®åˆ° $BACKUP_DATE..."

# 1. æ£€æŸ¥å¤‡ä»½æ–‡ä»¶
if [ ! -d "$BACKUP_LOCATION" ]; then
    echo "é”™è¯¯: å¤‡ä»½ç›®å½•ä¸å­˜åœ¨: $BACKUP_LOCATION"
    exit 1
fi

# 2. åœæ­¢æœåŠ¡
echo "åœæ­¢æœåŠ¡..."
systemctl stop dd-3d-lottery

# 3. æ¢å¤æ•°æ®
echo "æ¢å¤æ•°æ®..."
cp -r $BACKUP_LOCATION/data/* /var/lib/dd-3d-lottery/
cp -r $BACKUP_LOCATION/config/* /etc/dd-3d-lottery/

# 4. éªŒè¯æ•°æ®å®Œæ•´æ€§
echo "éªŒè¯æ•°æ®å®Œæ•´æ€§..."
wasmd query wasm contract $CONTRACT_ADDRESS

# 5. å¯åŠ¨æœåŠ¡
echo "å¯åŠ¨æœåŠ¡..."
systemctl start dd-3d-lottery

# 6. éªŒè¯æœåŠ¡çŠ¶æ€
echo "éªŒè¯æœåŠ¡çŠ¶æ€..."
sleep 10
systemctl status dd-3d-lottery

echo "æ•°æ®æ¢å¤å®Œæˆï¼"
```

## ğŸš¨ æ•…éšœå¤„ç†

### 1. æ•…éšœåˆ†ç±»

#### 1.1 æ•…éšœç­‰çº§

| æ•…éšœç­‰çº§ | å½±å“èŒƒå›´ | å“åº”æ—¶é—´ | è§£å†³æ—¶é—´ | ç¤ºä¾‹ |
|----------|----------|----------|----------|------|
| P0 - ä¸¥é‡ | ç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨ | 15åˆ†é’Ÿ | 2å°æ—¶ | åˆçº¦å´©æºƒã€æ•°æ®ä¸¢å¤± |
| P1 - é«˜ | æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨ | 30åˆ†é’Ÿ | 4å°æ—¶ | æŠ•æ³¨åŠŸèƒ½å¼‚å¸¸ã€æŸ¥è¯¢å¤±è´¥ |
| P2 - ä¸­ | éƒ¨åˆ†åŠŸèƒ½å¼‚å¸¸ | 2å°æ—¶ | 8å°æ—¶ | æ€§èƒ½ä¸‹é™ã€éƒ¨åˆ†ç”¨æˆ·å—å½±å“ |
| P3 - ä½ | éæ ¸å¿ƒåŠŸèƒ½å¼‚å¸¸ | 4å°æ—¶ | 24å°æ—¶ | ç»Ÿè®¡åŠŸèƒ½å¼‚å¸¸ã€æ–‡æ¡£é—®é¢˜ |

#### 1.2 æ•…éšœç±»å‹

```yaml
fault_types:
  system_faults:
    - "ç¡¬ä»¶æ•…éšœ"
    - "ç½‘ç»œæ•…éšœ"
    - "ç³»ç»Ÿå´©æºƒ"
    - "èµ„æºè€—å°½"
  
  application_faults:
    - "åˆçº¦é”™è¯¯"
    - "æ•°æ®ä¸ä¸€è‡´"
    - "æ€§èƒ½é—®é¢˜"
    - "å®‰å…¨æ¼æ´"
  
  business_faults:
    - "æŠ•æ³¨å¼‚å¸¸"
    - "å¥–é‡‘åˆ†é…é”™è¯¯"
    - "ç”¨æˆ·æŠ•è¯‰"
    - "åˆè§„é—®é¢˜"
```

### 2. æ•…éšœå“åº”æµç¨‹

#### 2.1 å“åº”æµç¨‹

```yaml
incident_response:
  detection:
    - "ç›‘æ§å‘Šè­¦"
    - "ç”¨æˆ·æŠ¥å‘Š"
    - "ç³»ç»Ÿæ£€æŸ¥"
    - "äººå·¥å‘ç°"
  
  assessment:
    - "æ•…éšœç¡®è®¤"
    - "å½±å“è¯„ä¼°"
    - "ä¼˜å…ˆçº§ç¡®å®š"
    - "å›¢é˜Ÿé€šçŸ¥"
  
  response:
    - "æ•…éšœéš”ç¦»"
    - "ä¸´æ—¶ä¿®å¤"
    - "æ ¹æœ¬åŸå› åˆ†æ"
    - "æ°¸ä¹…ä¿®å¤"
  
  recovery:
    - "æœåŠ¡æ¢å¤"
    - "æ•°æ®éªŒè¯"
    - "åŠŸèƒ½æµ‹è¯•"
    - "ç›‘æ§ç¡®è®¤"
  
  post_incident:
    - "æ•…éšœæ€»ç»“"
    - "æ”¹è¿›æªæ–½"
    - "æ–‡æ¡£æ›´æ–°"
    - "ç»éªŒåˆ†äº«"
```

#### 2.2 æ•…éšœå¤„ç†è„šæœ¬

```bash
#!/bin/bash
# incident_response.sh - æ•…éšœå“åº”è„šæœ¬

set -e

INCIDENT_ID=${1:-"INC-$(date +%Y%m%d-%H%M%S)"}
SEVERITY=${2:-"P2"}
DESCRIPTION=${3:-"æœªçŸ¥æ•…éšœ"}

echo "å¼€å§‹å¤„ç†æ•…éšœ: $INCIDENT_ID"
echo "ä¸¥é‡ç¨‹åº¦: $SEVERITY"
echo "æè¿°: $DESCRIPTION"

# 1. åˆ›å»ºæ•…éšœè®°å½•
echo "åˆ›å»ºæ•…éšœè®°å½•..."
mkdir -p /var/log/incidents/$INCIDENT_ID
cat > /var/log/incidents/$INCIDENT_ID/incident.log <<EOF
æ•…éšœID: $INCIDENT_ID
å¼€å§‹æ—¶é—´: $(date)
ä¸¥é‡ç¨‹åº¦: $SEVERITY
æè¿°: $DESCRIPTION
å¤„ç†äººå‘˜: $(whoami)
EOF

# 2. æ”¶é›†ç³»ç»Ÿä¿¡æ¯
echo "æ”¶é›†ç³»ç»Ÿä¿¡æ¯..."
systemctl status dd-3d-lottery > /var/log/incidents/$INCIDENT_ID/system_status.log
df -h > /var/log/incidents/$INCIDENT_ID/disk_usage.log
free -h > /var/log/incidents/$INCIDENT_ID/memory_usage.log
top -bn1 > /var/log/incidents/$INCIDENT_ID/cpu_usage.log

# 3. æ£€æŸ¥åˆçº¦çŠ¶æ€
echo "æ£€æŸ¥åˆçº¦çŠ¶æ€..."
wasmd query wasm contract $CONTRACT_ADDRESS > /var/log/incidents/$INCIDENT_ID/contract_status.log

# 4. å‘é€å‘Šè­¦é€šçŸ¥
echo "å‘é€å‘Šè­¦é€šçŸ¥..."
curl -X POST "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK" \
  -H "Content-Type: application/json" \
  -d "{
    \"text\": \"ğŸš¨ æ•…éšœå‘Šè­¦\",
    \"attachments\": [{
      \"color\": \"danger\",
      \"fields\": [
        {\"title\": \"æ•…éšœID\", \"value\": \"$INCIDENT_ID\", \"short\": true},
        {\"title\": \"ä¸¥é‡ç¨‹åº¦\", \"value\": \"$SEVERITY\", \"short\": true},
        {\"title\": \"æè¿°\", \"value\": \"$DESCRIPTION\", \"short\": false},
        {\"title\": \"æ—¶é—´\", \"value\": \"$(date)\", \"short\": true}
      ]
    }]
  }"

echo "æ•…éšœå“åº”å®Œæˆï¼"
echo "æ•…éšœè®°å½•ä¿å­˜åœ¨: /var/log/incidents/$INCIDENT_ID/"
```

### 3. å¸¸è§æ•…éšœå¤„ç†

#### 3.1 åˆçº¦æ•…éšœ

```yaml
contract_faults:
  gas_limit_exceeded:
    symptoms: ["äº¤æ˜“å¤±è´¥", "Gasä¸è¶³é”™è¯¯"]
    causes: ["Gasé™åˆ¶è®¾ç½®è¿‡ä½", "åˆçº¦é€»è¾‘å¤æ‚"]
    solutions: ["è°ƒæ•´Gasé™åˆ¶", "ä¼˜åŒ–åˆçº¦é€»è¾‘"]
  
  storage_overflow:
    symptoms: ["å­˜å‚¨å†™å…¥å¤±è´¥", "æ•°æ®ä¸¢å¤±"]
    causes: ["å­˜å‚¨ç©ºé—´ä¸è¶³", "æ•°æ®é‡è¿‡å¤§"]
    solutions: ["æ¸…ç†æ—§æ•°æ®", "æ‰©å®¹å­˜å‚¨"]
  
  permission_denied:
    symptoms: ["æ“ä½œè¢«æ‹’ç»", "æƒé™é”™è¯¯"]
    causes: ["æƒé™é…ç½®é”™è¯¯", "è´¦æˆ·æƒé™ä¸è¶³"]
    solutions: ["æ£€æŸ¥æƒé™é…ç½®", "æ›´æ–°è´¦æˆ·æƒé™"]
```

#### 3.2 ç½‘ç»œæ•…éšœ

```yaml
network_faults:
  rpc_timeout:
    symptoms: ["RPCè°ƒç”¨è¶…æ—¶", "ç½‘ç»œè¿æ¥å¤±è´¥"]
    causes: ["ç½‘ç»œå»¶è¿Ÿ", "RPCèŠ‚ç‚¹æ•…éšœ"]
    solutions: ["åˆ‡æ¢RPCèŠ‚ç‚¹", "å¢åŠ è¶…æ—¶æ—¶é—´"]
  
  chain_sync_issue:
    symptoms: ["é“¾åŒæ­¥å¤±è´¥", "åŒºå—é«˜åº¦ä¸ä¸€è‡´"]
    causes: ["ç½‘ç»œåˆ†åŒº", "èŠ‚ç‚¹æ•…éšœ"]
    solutions: ["é‡å¯èŠ‚ç‚¹", "é‡æ–°åŒæ­¥"]
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. æ€§èƒ½ç›‘æ§

#### 1.1 æ€§èƒ½æŒ‡æ ‡

```yaml
performance_metrics:
  response_time:
    target: "< 5ç§’"
    measurement: "å¹³å‡å“åº”æ—¶é—´"
    alert_threshold: "> 10ç§’"
  
  throughput:
    target: "100 TPS"
    measurement: "æ¯ç§’äº¤æ˜“æ•°"
    alert_threshold: "< 50 TPS"
  
  gas_consumption:
    target: "< 100k"
    measurement: "å¹³å‡Gasæ¶ˆè€—"
    alert_threshold: "> 200k"
  
  error_rate:
    target: "< 1%"
    measurement: "é”™è¯¯ç‡"
    alert_threshold: "> 5%"
```

#### 1.2 æ€§èƒ½åˆ†æ

```bash
#!/bin/bash
# performance_analysis.sh - æ€§èƒ½åˆ†æè„šæœ¬

set -e

echo "å¼€å§‹æ€§èƒ½åˆ†æ..."

# 1. æ”¶é›†æ€§èƒ½æ•°æ®
echo "æ”¶é›†æ€§èƒ½æ•°æ®..."
cargo bench > performance_benchmark.log

# 2. åˆ†æGasæ¶ˆè€—
echo "åˆ†æGasæ¶ˆè€—..."
wasmd query wasm contract-state smart $CONTRACT_ADDRESS '{"get_stats": {}}' > gas_consumption.log

# 3. åˆ†æå“åº”æ—¶é—´
echo "åˆ†æå“åº”æ—¶é—´..."
time wasmd query wasm contract-state smart $CONTRACT_ADDRESS '{"get_current_session": {}}' > response_time.log

# 4. ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
echo "ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š..."
cat > performance_report.md <<EOF
# æ€§èƒ½åˆ†ææŠ¥å‘Š

## åŸºå‡†æµ‹è¯•ç»“æœ
\`\`\`
$(cat performance_benchmark.log)
\`\`\`

## Gasæ¶ˆè€—åˆ†æ
\`\`\`
$(cat gas_consumption.log)
\`\`\`

## å“åº”æ—¶é—´åˆ†æ
\`\`\`
$(cat response_time.log)
\`\`\`

## ä¼˜åŒ–å»ºè®®
1. ä¼˜åŒ–å­˜å‚¨æ“ä½œ
2. å‡å°‘ä¸å¿…è¦çš„è®¡ç®—
3. ä½¿ç”¨æ‰¹é‡æ“ä½œ
4. ä¼˜åŒ–æ•°æ®ç»“æ„
EOF

echo "æ€§èƒ½åˆ†æå®Œæˆï¼"
echo "æŠ¥å‘Šä¿å­˜åœ¨: performance_report.md"
```

### 2. ä¼˜åŒ–ç­–ç•¥

#### 2.1 ä»£ç ä¼˜åŒ–

```yaml
code_optimization:
  algorithm_optimization:
    - "ä½¿ç”¨æ›´é«˜æ•ˆçš„æ’åºç®—æ³•"
    - "ä¼˜åŒ–å¥–é‡‘åˆ†é…ç®—æ³•"
    - "æ”¹è¿›éšæœºæ•°ç”Ÿæˆç®—æ³•"
    - "ä¼˜åŒ–å“ˆå¸Œè®¡ç®—"
  
  data_structure_optimization:
    - "ä½¿ç”¨æ›´ç´§å‡‘çš„æ•°æ®ç»“æ„"
    - "ä¼˜åŒ–å­˜å‚¨å¸ƒå±€"
    - "å‡å°‘å†…å­˜åˆ†é…"
    - "ä½¿ç”¨ç¼“å­˜æœºåˆ¶"
  
  gas_optimization:
    - "å‡å°‘å­˜å‚¨æ“ä½œ"
    - "ä¼˜åŒ–å¾ªç¯ç»“æ„"
    - "ä½¿ç”¨æ‰¹é‡æ“ä½œ"
    - "é¿å…ä¸å¿…è¦çš„è®¡ç®—"
```

#### 2.2 ç³»ç»Ÿä¼˜åŒ–

```yaml
system_optimization:
  hardware_optimization:
    - "ä½¿ç”¨SSDå­˜å‚¨"
    - "å¢åŠ å†…å­˜å®¹é‡"
    - "ä¼˜åŒ–ç½‘ç»œé…ç½®"
    - "ä½¿ç”¨ä¸“ç”¨ç¡¬ä»¶"
  
  software_optimization:
    - "ä¼˜åŒ–Rustç¼–è¯‘é€‰é¡¹"
    - "ä½¿ç”¨æ€§èƒ½åˆ†æå·¥å…·"
    - "ä¼˜åŒ–ä¾èµ–åº“"
    - "ä½¿ç”¨å¹¶è¡Œå¤„ç†"
  
  configuration_optimization:
    - "è°ƒæ•´Gasé™åˆ¶"
    - "ä¼˜åŒ–è¶…æ—¶è®¾ç½®"
    - "é…ç½®ç¼“å­˜ç­–ç•¥"
    - "è°ƒæ•´å¹¶å‘å‚æ•°"
```

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | å˜æ›´äºº |
|------|------|----------|--------|
| v1.0 | 2024-01-XX | åˆå§‹éƒ¨ç½²ä¸è¿ç»´æ–‡æ¡£åˆ›å»º | AI Assistant |

---

**æ³¨æ„**: æœ¬æ–‡æ¡£æä¾›äº†DD 3Då½©ç¥¨æ™ºèƒ½åˆçº¦çš„å®Œæ•´éƒ¨ç½²ä¸è¿ç»´æŒ‡å—ï¼Œåº”è¯¥æ ¹æ®å®é™…ç¯å¢ƒè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°ã€‚
